<template>
  <div class="stats-container">
    <div class="logout-row">
      <c-logout-button></c-logout-button>
    </div>

    <lightning-card title="Control Question Stats" icon-name="utility:chart" class="stats-card">
      <div class="slds-p-around_medium">
        <!-- Jeśli są ankiety do wyboru, pokaż combobox -->
        <template if:true={hasSurveys}>
          <lightning-combobox
            name="survey"
            label="Wybierz ankietę"
            value={selectedSurveyId}
            placeholder="Wybierz ankietę"
            options={surveyOptions}
            onchange={handleSurveyChange}>
          </lightning-combobox>
        </template>
        <!-- Jeśli nie ma żadnych ankiet, pokaż komunikat -->
        <template if:true={isEmpty}>
          <p class="slds-text-color_weak">
            Brak dostępnych ankiet do wyświetlenia statystyk.
          </p>
        </template>
      </div>

      <div class="slds-p-around_medium chart-container" style="height:300px;">
        <!-- Po wybraniu ankiety i gdy są dane, rysuj wykres -->
        <template if:true={showChart}>
        <canvas class="chart-canvas"></canvas>
        </template>
        <!-- Po wybraniu ankiety, ale brak danych -->
        <template if:true={showNoDataMessage}>
          <p class="slds-text-color_weak slds-m-top_medium">
            Brak danych kontrolnych do wyświetlenia.
          </p>
        </template>
      </div>
    </lightning-card>
  </div>
</template>
